knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
View(combo_data)
combo_data <- combo_data %>%
mutate(filename = as.character(filename)) %>%
mutate(filename = str_remove(filename, "^C:/.*export-")) %>%
rename(phone_number = `手机号码`) %>%
mutate(phone_number = str_replace_all(phone_number, "-", "") %>%
str_replace_all("[^0-9]", ""))
View(combo_data)
combo_data <- combo_data %>%
mutate(filename = as.character(filename)) %>%
mutate(filename = str_remove(filename, "^C:/.*DM2024")) %>%
rename(phone_number = `手机号码`) %>%
mutate(phone_number = str_replace_all(phone_number, "-", "") %>%
str_replace_all("[^0-9]", ""))
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
combo_data <- combo_data %>%
mutate(filename = as.character(filename)) %>%
mutate(filename = str_remove(filename, "^C:/.*DM2024")) %>%
rename(phone_number = `手机号码`) %>%
mutate(phone_number = str_replace_all(phone_number, "-", "") %>%
str_replace_all("[^0-9]", ""))
View(combo_data)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
combo_data <- combo_data %>%
mutate(filename = as.character(filename)) %>%
mutate(filename = str_remove(filename, "^C:/.*US DM")) %>%
rename(phone_number = `手机号码`) %>%
mutate(phone_number = str_replace_all(phone_number, "-", "") %>%
str_replace_all("[^0-9]", ""))
View(combo_data)
library(tidyverse)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
combo_data <- combo_data  |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium)
)
combo_data <- combo_data |>
rename(channel = utm_medium)
combo_data |>
group_by(channel) |>
summarize(form_fill_numbers=n()) |>
arrange(desc(form_fill_numbers)) -> summary_table
write_csv(summary_table, "form_fill_counts_by_channel.csv")
write_csv(combo_data,"all_form_fill.csv")
View(combo_data)
View(summary_table)
combo_data <- combo_data  |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium)
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sms"), "SMS", utm_medium)
combo_data <- combo_data  |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium)
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sms"), "SMS", utm_medium)
View(combo_data)
combo_data <- combo_data |>
rename(channel = utm_medium)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
combo_data <- combo_data  |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sms"), "SMS", utm_medium)
)
combo_data <- combo_data |>
rename(channel = utm_medium)
View(combo_data)
View(combo_data)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
combo_data <- combo_data  |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sMS"), "SMS", utm_medium)
)
View(combo_data)
folder_path <- '~/Performance Analysis/Form Submission/2024/Jan8_to_Jan14/Data'
filenames <- list.files(folder_path, pattern = "\\.csv$", full.names = TRUE)
combo_data <- purrr::map_df(filenames,
~read.csv(.x, stringsAsFactors = FALSE) %>% mutate(filename = .x))
View(combo_data)
combo_data <- combo_data  |>
str_replace_all(utm_medium, "\\s+", NA_character_) |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sMS"), "SMS", utm_medium)
)
combo_data <- combo_data  |>
str_replace_all(utm_medium, "\\s+", NA) |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sMS"), "SMS", utm_medium)
)
combo_data <- combo_data  |>
str_replace_all(utm_medium, "\\s+", "NA") |>
mutate(utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sMS"), "SMS", utm_medium)
)
combo_data <- combo_data  |>
mutate(
utm_medium = str_replace_all(utm_medium, "\\s+", "NA"),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEM|Blog Pages Contact us"), "SEM", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)SEO|Contact us"), "SEO", utm_medium),
utm_medium = ifelse(is.na(utm_medium) & str_detect(Form.Name..ID., "(?i)sMS"), "SMS", utm_medium)
)
View(combo_data)
library(readxl)
report1705446415688 <- read_excel("C:\\Users\\skt\\Downloads\\report1705446415688.csv")
report1705446415688 <- read_excel("C:\Users\skt\Downloads\report1705446415688.csv")
report1705446415688 <- read_excel("C:\Users\skt\Downloads\report1705446415688.csv")
report1705446415688 <- read_csv("~/Performance Analysis/report1705446415688.csv")
View(report1705446415688)
